# E-diary DB hack scripts

## Введение

Этот проект представляет собой набор скриптов для модификации данных в базе данных электронного дневника. Он предназначен для демонстрации возможностей программирования и управления данными и может быть использован в образовательных целях как учениками, так и разработчиками.

## Описание

Скрипты для ~~взлома~~ этичного хакинга базы данных электронного дневника. Эти инструменты предназначены для демонстрации и тестирования возможностей модификации данных в электронном дневнике, используемом в образовательных учреждениях.

## Возможности

- **Исправление оценок**: скрипт позволяет автоматически заменять низкие оценки (например, "2" и "3") на более высокие ("5"). Это может быть полезно для демонстрации влияния оценок на общую успеваемость ученика.

- **Удаление замечаний**: функция предоставляет возможность удаления всех замечаний, сделанных учителями ученику. Это может помочь в анализе влияния дисциплинарных записей на поведение учеников.

- **Добавление похвал**: с помощью скрипта можно добавить похвальные отзывы от учителей к конкретным урокам. Это может быть использовано для изучения влияния позитивной обратной связи на мотивацию и успеваемость учеников.

## Предупреждение

Перед использованием этих скриптов убедитесь, что у вас есть разрешение на внесение изменений в базу данных. Не используйте эти скрипты для нанесения ущерба или нарушения конфиденциальности данных. Всегда действуйте в рамках закона и этических норм.

## Зависимости

Эти скрипты не эмулируют и не запускают собственную БД или веб-приложение электронного дневника и требуют для запуска развернутое веб-приложение электронного дневника на Django с БД и доступ к консоли на сервере развернутого веб-приложения.

Как вариант, вы можете взять за основу [это веб-приложение электронного дневника от dvmn.org](https://github.com/devmanorg/e-diary) и свою собственную БД.

## Подготовка

Чтобы использовать эти скрипты необходимо открыть корневую папку веб-приложения электронного дневника (представим что это `/home/www/e-dairy`) и скопировать туда файл scripts.py.

Это можно сделать либо руками, либо командами из корневой папки веб-приложения электронного дневника:

```
cd /home/www/e-dairy
git clone https://github.com/WarLikeLaux/e-diary-db-hack
cp e-diary-db-hack/scripts.py scripts.py
```

После подготовки необходимо запустить shell-оболочку веб-приложения электронного дневника, чтобы мы могли иметь возможность запускать свои скрипты.

```
python3 manage.py shell
```

Затем нам необходимо импортировать все наши функции для дальнейшего их использования:

```
from scripts import get_schoolkid, fix_marks, remove_chastisements, create_commendation
```

## Использование

В активной shell-оболочке веб-приложения после импорта нашего скрипта мы можем выполнить следующие действия:

**1. Найти ученика** передав в функцию `get_schoolkid` имя требуемого ученика. Всегда перед использованием команд по исправлению оценок и т.д. следует проверить корректноть вводимого имена сверив класс ученика, получаемый в ответ этой командой.

```
get_schoolkid(schoolkid_name)
```

На конкретном примере использования:

```
>>> get_schoolkid("Фролов Иван")
<Schoolkid: Фролов Иван Григорьевич 6А>
```

Если найдено несколько учеников с таким именем:

```
>>> get_schoolkid("Иван")
'Найдено несколько учеников с именем Иван - уточните запрос добавив фамилию или отчество.'
```

Если ученика нет:

```
>>> get_schoolkid("Кристофер")
'Ученик с именем Кристофер не найден - проверьте корректность ввода.'
```

**2. Исправить все плохие оценки ученика** передав в фукнцию `fix_marks` имя требуемого ученика получив в ответ количество исправленных оценок.

```
fix_marks(schoolkid_name)
```
	
На конкретном примере использования:

```
>>> fix_marks("Фролов Иван")
1
```

**3. Удалить все замечания ученика** передав в функцию`remove_chastisements` имя требуемого ученика получив в ответ количество удаленных замечений и сами замечания.

```
remove_chastisements(schoolkid_name)
```
На конкретном примере использования:

```
>>> remove_chastisements("Фролов Иван")
(0, {})
```

**4. Добавить ученику похвалу** передав в функцию `create_commendation` имя требуемого ученика, название предмета, к уроку по которому необходиму добавить похвалу, а также режим выбора урока (по дефолту выбирает последний - `latest`, также можно выбрать `first` чтобы выбрать самый старый урок и `random` чтобы выбрать рандомный урок) получив в ответ информацию об созданной похвале.

```
create_commendation(schoolkid_name, subject_title, mode="latest")
```

На конкретном примере использования:

```
>>> create_commendation("Фролов Иван", "Музыка")
'Commendation: Супер!, Schoolkid: Фролов Иван Григорьевич, Date: 2018-11-13, Subject: Музыка, Teacher: Селезнева Майя Макаровна'
```

Если уроки без похвал закончились:

```
>>> create_commendation("Фролов Иван", "Музыка")
NoLessonException('Урок по предмету `Музыка` без похвалы не найден.')
```

Идеальный вариант использования это занесение имени в переменную `schoolkid_name` и дальнейшее ее использование в функциях, чтобы избежать опечаток и ошибок при вводе.

```
schoolkid_name = "Фролов Иван"
fix_marks(schoolkid_name)
remove_chastisements(schoolkid_name)
create_commendation(schoolkid_name, "Музыка")
```

## Цели проекта

Этот код был написан в образовательных целях как часть онлайн-курса для веб-разработчиков на [dvmn.org](https://dvmn.org/). Он показывает, как можно манипулировать данными в базе данных Django, обеспечивая при этом возможность лучше понять механизмы работы веб-приложений и баз данных.

## Лицензия

Этот код является открытым исходным кодом и доступен для любых модификаций, распространения и использования. Не стесняйтесь использовать его любым удобным для вас способом.